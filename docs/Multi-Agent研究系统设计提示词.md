# ğŸ¤– åŸºäºArtifactçš„Multi-Agentç ”ç©¶ç³»ç»Ÿè®¾è®¡æ–¹æ¡ˆï¼ˆArtifactFlowï¼‰

## ç³»ç»Ÿæ¶æ„æ¦‚è¦

- **åŒArtifactæœºåˆ¶**ï¼šTask Plan (è¿›åº¦è·Ÿè¸ª) + Result (ç ”ç©¶æˆæœ)
- **Lead Agent**ï¼šä»»åŠ¡åè°ƒï¼Œå”¯ä¸€å¯è¯»å†™Artifact
- **Subagents**ï¼šåªè¯»Task Planï¼Œè¿”å›ç»“æ„åŒ–ç»“æœç»™Lead
- **ä¿¡æ¯æµ**ï¼šSubagent â†’ Lead Agent â†’ Artifact (å•å‘é¿å…å†²çª)

```
 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
 â”‚                       ARTIFACT LAYER                       â”‚
 â”‚                                                            â”‚
 â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
 â”‚  â”‚       Task Plan Artifact      â”‚  â”‚    Result Artifact â”‚ â”‚
 â”‚  â”‚  - ä»»åŠ¡åˆ†è§£ & è¿›åº¦è·Ÿè¸ª          â”‚  â”‚  - æœ€ç»ˆäº§å‡ºæ–‡æ¡£     â”‚ â”‚
 â”‚  â”‚  - å…±äº«ç»™æ‰€æœ‰Agent æœ‰æƒé™æ§åˆ¶   â”‚  â”‚   - å…±äº«ç»™ç”¨æˆ·      â”‚ â”‚
 â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
 â”‚                                                            â”‚
 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â†‘                     â†‘                    â†‘
           â”‚                     â”‚                    â”‚
           â”‚ (è¯»å†™)              â”‚ (åªè¯»)              â”‚ (è¯»å†™)
           â”‚                     â”‚                    â”‚
 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
 â”‚   Lead Agent  â”‚      â”‚   Subagents   â”‚      â”‚    User      â”‚
 â”‚  - ç®¡ç†ä»»åŠ¡    â”‚      â”‚ - Search Agentâ”‚      â”‚ - å¯æµè§ˆç¼–è¾‘  â”‚
 â”‚  - åè°ƒæ‰§è¡Œ    â”‚      â”‚ - Web Crawl   â”‚      â”‚ - å¯ç»™åé¦ˆ    â”‚
 â”‚  - æ•´åˆç»“æœ    â”‚      â”‚ - Others...   â”‚      â”‚              â”‚
 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Lead Agent**

- **èŒè´£**: ä»»åŠ¡è§„åˆ’ã€ä¿¡æ¯æ•´åˆã€ç”¨æˆ·äº¤äº’
- **å·¥å…·:**
  - Artifactæ“ä½œ (create/update/rewrite)
  - Subagentè°ƒç”¨æ¥å£
- **ç‰¹ç‚¹**: ä¿æŒä¸Šä¸‹æ–‡ç®€æ´ï¼Œä¸“æ³¨äºé«˜å±‚å†³ç­–

**Subagents**

- **Search Agent**: ä¿¡æ¯æ£€ç´¢ï¼Œè¿”å›ç»“æ„åŒ–æœç´¢ç»“æœ
- **Web Crawl Agent**: æ·±åº¦å†…å®¹æŠ“å–ï¼Œæå–å…³é”®ä¿¡æ¯
- **ç‹¬ç«‹æ€§**: æ¯ä¸ªagentç‹¬ç«‹å®Œæˆåˆ†é…ä»»åŠ¡ï¼Œè‡ªä¸»åˆ¤æ–­å®Œæˆæ ‡å‡†

**åŒArtifactæœºåˆ¶**

- **Task Plan Artifact:**
  - **Lead Agentæƒé™**: è¯»å†™ (æ›´æ–°ä»»åŠ¡çŠ¶æ€ã€æ·»åŠ æ–°ä»»åŠ¡ã€ä¿®æ”¹ä¼˜å…ˆçº§)
  - **Subagentæƒé™**: åªè¯» (äº†è§£ä»»åŠ¡éœ€æ±‚ã€æŸ¥çœ‹ä¸Šä¸‹æ–‡ä¿¡æ¯)
  - **ç”¨æˆ·æƒé™**: åªè¯» (æŸ¥çœ‹ç ”ç©¶è¿›åº¦å’Œä»»åŠ¡çŠ¶æ€)
- **Result Artifact:**
  - **Lead Agentæƒé™**: è¯»å†™ (æ•´åˆä¿¡æ¯ã€æ›´æ–°å†…å®¹ã€è°ƒæ•´ç»“æ„)
  - **Subagentæƒé™**: æ— è®¿é—®æƒé™ (ä¿æŒèŒè´£æ¸…æ™°ï¼Œé¿å…ç›´æ¥ä¿®æ”¹æœ€ç»ˆç»“æœ)
  - **ç”¨æˆ·æƒé™**: è¯»å†™ (ç¼–è¾‘å†…å®¹ã€è°ƒæ•´æ ¼å¼ã€æ·»åŠ æ‰¹æ³¨)

## ğŸ”„ å·¥ä½œæµç¨‹

```
   ç”¨æˆ·æå‡ºéœ€æ±‚
        â”‚
        â”‚ (å¯¹è¯äº¤äº’)
        â†“
   Lead Agentåˆ›å»ºTask Plan
        â”‚
        â”‚ (åˆ†æå¹¶æ´¾å‘ä»»åŠ¡)
        â†“
   â”Œâ”€â”€â”€ Search Agent â†â”€â”€ (è¯»å–Task Planè·å–å®Œæ•´ä¸Šä¸‹æ–‡)
   â”‚         â”‚
   â”‚         â””â”€â”€â†’ è¿”å›æœç´¢ç»“æœ
   â”‚
   â”œâ”€â”€â”€ Crawl Agent â†â”€â”€ (è¯»å–Task Planè·å–å®Œæ•´ä¸Šä¸‹æ–‡)  
   â”‚         â”‚
   â”‚         â””â”€â”€â†’ è¿”å›æŠ“å–ç»“æœ
   â”‚
   â””â”€â”€â”€ Other Agents...
        â”‚
        â†“
Lead Agentæ•´åˆä¿¡æ¯
        â”‚
        â”‚ (æ›´æ–°Task PlançŠ¶æ€)
        â”‚ (æ›´æ–°Result Artifactå†…å®¹)
        â†“
   ç”¨æˆ·æŸ¥çœ‹ç»“æœ
        â”‚
        â”‚ (ç¼–è¾‘Artifactæˆ–å¯¹è¯åé¦ˆ)
        â†“
   Lead Agentæ ¹æ®åé¦ˆè°ƒæ•´
        â”‚
        â”‚ (å¾ªç¯æ‰§è¡Œç›´åˆ°æ»¡æ„)
        â†“
      ä»»åŠ¡å®Œæˆ
```

### é˜¶æ®µ1: ç ”ç©¶è§„åˆ’

1. ç”¨æˆ·æå‡ºç ”ç©¶éœ€æ±‚
2. Lead Agentåˆ†æéœ€æ±‚ï¼Œåˆ›å»ºTask Plan Artifactå’Œåˆå§‹Result Artifactæ¡†æ¶
3. ç³»ç»Ÿè¿›å…¥æ‰§è¡Œé˜¶æ®µ

### é˜¶æ®µ2: ä¿¡æ¯æ”¶é›†

1. Lead Agentæ ¹æ®Task Planæ´¾å‘æœç´¢ä»»åŠ¡
2. **Search Agentè¯»å–Task Plan**ï¼Œäº†è§£å…·ä½“æœç´¢éœ€æ±‚å’Œä¸Šä¸‹æ–‡
3. Search Agentç‹¬ç«‹æ‰§è¡Œæœç´¢ï¼Œ**è¿”å›ç»“æœç»™Lead Agent**ï¼ˆä¸ç›´æ¥ä¿®æ”¹ä»»ä½•Artifactï¼‰
4. Lead Agentæ¥æ”¶ç»“æœåï¼š
   - æ›´æ–°Task Planä¸­çš„ä»»åŠ¡çŠ¶æ€
   - å°†ä¿¡æ¯æ•´åˆåˆ°Result Artifact
   - è¯„ä¼°æ˜¯å¦éœ€è¦è¿›ä¸€æ­¥æŠ“å–
5. å¿…è¦æ—¶æ´¾å‘URLç»™Web Crawl Agentï¼Œé‡å¤ä¸Šè¿°æµç¨‹

### é˜¶æ®µ3: åä½œä¼˜åŒ–

1. **ä»»åŠ¡å®Œæˆåçš„äº¤äº’**ï¼šLead Agentå®Œæˆä¸€è½®ä»»åŠ¡æ‰§è¡Œï¼Œå‘ç”¨æˆ·å±•ç¤ºæ›´æ–°åçš„Result Artifact
2. **ç”¨æˆ·åé¦ˆæ–¹å¼ï¼š**
   - ç›´æ¥ç¼–è¾‘Result Artifactï¼ˆä¿®æ”¹å†…å®¹ã€è°ƒæ•´ç»“æ„ã€æ·»åŠ è¦æ±‚ï¼‰
   - é€šè¿‡å¯¹è¯å‘Lead Agentæå‡ºæ”¹è¿›è¦æ±‚ï¼ˆ"éœ€è¦æ›´å¤šä¸´åºŠæ•°æ®"ã€"å¢åŠ å¸‚åœºåˆ†æç« èŠ‚"ï¼‰
3. **Lead Agentå“åº”**ï¼šæ ¹æ®ç”¨æˆ·åé¦ˆè°ƒæ•´Task Planï¼Œæ´¾å‘æ–°çš„ä»»åŠ¡æˆ–ä¼˜åŒ–ç°æœ‰å†…å®¹
4. **è¿­ä»£å¾ªç¯**ï¼šé‡å¤æ‰§è¡Œç›´åˆ°ç”¨æˆ·æ»¡æ„

## æŠ€æœ¯æ ˆ

- **æ¡†æ¶**: LangGraph (å·¥ä½œæµ) + LangChain (LLMæ¥å£)
- **æ¨¡å‹**: æ”¯æŒOpenAIæ¥å£å…¼å®¹æ¨¡å‹(Qwen/DeepSeekç­‰)
- **å­˜å‚¨**: å†…å­˜Checkpoint (LangGraph MemorySaver)



## å…³é”®å®ç°æ¨¡å—

### 1. æ‰§è¡Œæ§åˆ¶å™¨ (Human in the Loop)

```python
class ExecutionController:
    async def pause(thread_id): # æš‚åœæ‰§è¡Œ
    async def resume(thread_id): # æ¢å¤+å¸¦å…¥ç”¨æˆ·context
    async def rollback(thread_id, checkpoint_id): # å›æ»š
    def add_context(user_query): # æš‚åœæ—¶æ·»åŠ è¡¥å……è¦æ±‚
```

### 2. LangGraphå·¥ä½œæµ

```python
from langgraph.graph import StateGraph
from langgraph.checkpoint.memory import MemorySaver

workflow = StateGraph(AgentState)
workflow.add_node("lead_agent", lead_agent_node)
workflow.add_node("search_agent", search_agent_node)
workflow.add_conditional_edges("lead_agent", route_to_subagent, {...})
app = workflow.compile(checkpointer=MemorySaver())
```

### 3. XMLå·¥å…·è°ƒç”¨ (ä¸ç”¨tool_callæ¥å£)

```xml
<tool_call>
  <name>web_search</name>
  <params>
    <query>AI medical FDA approval</query>
  </params>
</tool_call>
```

### 4. Robust XMLè§£æå™¨

```python
class RobustXMLParser:
    def parse(text):
        # 1.æ ‡å‡†è§£æ â†’ 2.ä¿®å¤å¸¸è§é”™è¯¯ â†’ 3.æ­£åˆ™æå–
```

### 5. Contextå‹ç¼© (20kå­—ç¬¦é™åˆ¶)

- ä¿ç•™æœ€è¿‘Nè½®å¯¹è¯ + å…³é”®å†³ç­–ç‚¹
- å†å²å¯¹è¯å‹ç¼©ä¸ºæ‘˜è¦
- åŸºäºä»»åŠ¡ç›¸å…³æ€§ç­›é€‰



## æ ¸å¿ƒç‰¹æ€§

### 1. æµå¼å“åº”æœºåˆ¶

- **Lead Agent**: ä½¿ç”¨æµå¼è¾“å‡ºï¼Œå®æ—¶å±•ç¤ºæ€è€ƒè¿‡ç¨‹å’Œç»“æœç”Ÿæˆï¼Œé€šè¿‡WebSocketæ¨é€ç»™å‰ç«¯
- **Subagents**: ç­‰å¾…å®Œæ•´å“åº”åæ‰¹é‡è¿”å›ï¼Œé¿å…ç¢ç‰‡åŒ–ä¿¡æ¯å¹²æ‰°ä¸»æµç¨‹

### 2. å·¥å…·æƒé™æ§åˆ¶

- é’ˆå¯¹æ¯ä¸ªå·¥å…·è®¾ç½®æƒé™çº§åˆ«ï¼šPUBLIC(ç›´æ¥æ‰§è¡Œå¦‚æœç´¢)ã€NOTIFY(æ‰§è¡Œåé€šçŸ¥å¦‚ä¿å­˜æ–‡ä»¶)ã€CONFIRM(éœ€ç”¨æˆ·ç¡®è®¤å¦‚å‘é‚®ä»¶)ã€RESTRICTED(éœ€ç‰¹æ®Šæˆæƒå¦‚æ‰§è¡Œä»£ç )
- æ•æ„Ÿæ“ä½œéœ€è¦ç”¨æˆ·å®¡æ‰¹ï¼Œæ™®é€šæŸ¥è¯¢ç±»å·¥å…·è‡ªåŠ¨æ‰§è¡Œ
- ä»£ç ç»†èŠ‚ï¼š

1.  **Setup Phase:**
    
    *   åˆ›å»º `ToolRegistry` å®ä¾‹ã€‚
    *   æ³¨å†Œæ‰€æœ‰å¯ç”¨å·¥å…·åˆ° `registry.tool_library`ã€‚
    *   å®šä¹‰ agent çš„é»˜è®¤æƒé™ `default_perms = {"lead_agent": {...}, "search_agent": {...}}`ã€‚
    *   åˆ›å»º `PermissionManager` å®ä¾‹ï¼Œä¼ å…¥é…ç½®ï¼š`permission_manager = PermissionManager(default_perms)`ã€‚
    *   ä¸ºæ¯ä¸ª agent åˆ›å»ºå·¥å…·åŒ…ï¼š`registry.create_agent_toolkit("search_agent", tool_names=["search_web", "send_email"])`ã€‚
    
2.  **Execution Phase (Agent wants to use "send_email"):**
    
    *   **Step 1 (Availability):** ä» Registry è·å–å·¥å…·ã€‚
        ```python
        toolkit = registry.get_agent_toolkit("search_agent")
        tool_to_use = toolkit.get_tool("send_email")
        if not tool_to_use:
            # å¤±è´¥ï¼šAgent ç”šè‡³æ²¡æœ‰è¿™ä¸ªå·¥å…·
            return "Error: Tool not available."
        ```
    *   **Step 2 (Authorization):** è¯¢é—® Permission Managerã€‚
        ```python
        if not permission_manager.check_permission("search_agent", tool_to_use, auto_request=True):
            # å¤±è´¥ï¼šAgent æœ‰è¿™ä¸ªå·¥å…·ï¼Œä½†å½“å‰æ²¡æœ‰æƒé™ä½¿ç”¨å®ƒã€‚
            # (ä¸€ä¸ªæƒé™è¯·æ±‚å¯èƒ½å·²è¢«è‡ªåŠ¨åˆ›å»º)
            return "Waiting for permission to use send_email."
        ```
    *   **Step 3 (User Confirmation, if needed):**
        ```python
        if tool_to_use.permission == ToolPermission.CONFIRM:
            # æš‚åœå¹¶å‘ç”¨æˆ·è¯·æ±‚æ‰§è¡Œè®¸å¯
            user_approval = ask_user_for_confirmation(...)
            if not user_approval:
                return "Execution cancelled by user."
        ```
    *   **Step 4 (Execution):** è°ƒç”¨å·¥å…·ã€‚
        ```python
        result = await toolkit.execute_tool("send_email", params={...})
        ```

### 3. åˆ†çº§æ—¥å¿—ç³»ç»Ÿ

- æ”¯æŒé…ç½®æ˜¯å¦è®°å½•å®Œæ•´promptå’Œresponseï¼ˆè°ƒè¯•æ—¶å¼€å¯ï¼Œç”Ÿäº§ç¯å¢ƒå…³é—­ä»¥èŠ‚çœå­˜å‚¨ï¼‰
- é»˜è®¤åªè®°å½•å…³é”®ä¿¡æ¯ï¼šæ¨¡å‹åç§°ã€tokenæ•°ã€è€—æ—¶ã€æˆæœ¬ã€å“åº”é¢„è§ˆ(å‰200å­—ç¬¦)
- æä¾›debugæ¨¡å¼ä¸€é”®å¼€å¯è¯¦ç»†æ—¥å¿—

### 4. é”™è¯¯å¤„ç†ç­–ç•¥

- **æ¨¡å‹è°ƒç”¨é”™è¯¯**: é™æµé”™è¯¯ç”¨æŒ‡æ•°é€€é¿é‡è¯•ï¼›è¶…æ—¶é”™è¯¯ç«‹å³é‡è¯•æˆ–é™çº§åˆ°å°æ¨¡å‹ï¼›è®¤è¯é”™è¯¯ç›´æ¥å¤±è´¥å¹¶é€šçŸ¥ç”¨æˆ·
- **å·¥å…·è°ƒç”¨é”™è¯¯**: ç½‘ç»œé”™è¯¯è‡ªåŠ¨é‡è¯•ï¼›è§£æé”™è¯¯é™çº§åˆ°æ­£åˆ™æå–ï¼›æƒé™é”™è¯¯è¯·æ±‚ç”¨æˆ·æˆæƒ
- **XMLè§£æé”™è¯¯**: è‡ªåŠ¨ä¿®å¤æœªé—­åˆæ ‡ç­¾ã€è½¬ä¹‰ç‰¹æ®Šå­—ç¬¦ï¼Œå®åœ¨æ— æ³•è§£æåˆ™æå–å¯ç”¨éƒ¨åˆ†

### 5. ç›‘æ§æŒ‡æ ‡

- å®æ—¶ç»Ÿè®¡å„æ¨¡å‹çš„è°ƒç”¨æ¬¡æ•°ã€tokenæ¶ˆè€—ã€æˆæœ¬ç´¯è®¡
- è·Ÿè¸ªå·¥å…·ä½¿ç”¨é¢‘ç‡ã€é”™è¯¯ç‡ã€å¹³å‡å“åº”æ—¶é—´
- æ”¯æŒå¯¼å‡ºåˆ†ææŠ¥å‘Šç”¨äºä¼˜åŒ–ç³»ç»Ÿæ€§èƒ½



## é¡¹ç›®ç»“æ„

```
artifact-flow/
â”œâ”€â”€ ğŸ“„ README.md
â”œâ”€â”€ ğŸ“„ requirements.txt
â”œâ”€â”€ ğŸ“„ .env.example
â”œâ”€â”€ ğŸ“„ .gitignore
â”œâ”€â”€ ğŸ“„ Dockerfile                     # Dockeré•œåƒå®šä¹‰
â”œâ”€â”€ ğŸ“„ docker-compose.yml             # Docker Composeé…ç½®
â”œâ”€â”€ ğŸ“„ config.yaml                    # â­ å…¨å±€é…ç½®æ–‡ä»¶
â”‚
â”œâ”€â”€ ğŸ“ src/
â”‚   â”œâ”€â”€ ğŸ“„ __init__.py
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ core/                      # â­ æ ¸å¿ƒæ¨¡å—
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ __init__.py
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ graph.py               # LangGraphå·¥ä½œæµå®šä¹‰
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ state.py               # çŠ¶æ€ç®¡ç†å’Œå®šä¹‰
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ controller.py          # æ‰§è¡Œæ§åˆ¶å™¨(pause/resume/rollback)
â”‚   â”‚   â””â”€â”€ ğŸ“„ context_manager.py     # Contextå‹ç¼©å’Œç®¡ç†
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ agents/                    # â­ Agentå®ç°
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ __init__.py
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ base.py                # BaseAgentæŠ½è±¡ç±»
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ lead_agent.py          # Lead Agentå®ç°
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ search_agent.py        # Search Agentå®ç°
â”‚   â”‚   â””â”€â”€ ğŸ“„ crawl_agent.py         # Web Crawl Agentå®ç°
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ tools/                     # å·¥å…·ç³»ç»Ÿ
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ __init__.py
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ base.py                # BaseToolæŠ½è±¡ç±»
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ registry.py            # å·¥å…·æ³¨å†Œå’Œç®¡ç†
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ prompt_generator.py    # XMLæç¤ºè¯ç”Ÿæˆå™¨
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ permissions.py         # æƒé™æ§åˆ¶
â”‚   â”‚   â””â”€â”€ ğŸ“ implementations/       # å…·ä½“å·¥å…·å®ç°
â”‚   â”‚       â”œâ”€â”€ ğŸ“„ __init__.py
â”‚   â”‚       â”œâ”€â”€ ğŸ“„ web_search.py
â”‚   â”‚       â”œâ”€â”€ ğŸ“„ web_fetch.py
â”‚   â”‚       â””â”€â”€ ğŸ“„ artifact_ops.py    # Artifactæ“ä½œå·¥å…·
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ models/                    # æ¨¡å‹æ¥å£
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ __init__.py
â”‚   â”‚   â””â”€â”€ ğŸ“„ llm.py                 # â­ ç»Ÿä¸€çš„LLMæ¥å£(åŸºäºLangChain)
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ utils/                     # å·¥å…·å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ __init__.py
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ xml_parser.py          # â­ Robust XMLè§£æ
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ logger.py              # æ—¥å¿—ç³»ç»Ÿ
â”‚   â”‚   â””â”€â”€ ğŸ“„ retry.py               # é‡è¯•æœºåˆ¶
â”‚   â”‚
â”‚   â””â”€â”€ ğŸ“ api/                       # APIæ¥å£å±‚
â”‚       â”œâ”€â”€ ğŸ“„ __init__.py
â”‚       â”œâ”€â”€ ğŸ“„ server.py              # FastAPI/FlaskæœåŠ¡å™¨
â”‚       â”œâ”€â”€ ğŸ“„ websocket.py          # WebSocketå¤„ç†
â”‚       â”œâ”€â”€ ğŸ“„ routes.py              # APIè·¯ç”±å®šä¹‰
â”‚       â””â”€â”€ ğŸ“„ schemas.py             # Pydanticæ¨¡å‹å®šä¹‰
â”‚
â”œâ”€â”€ ğŸ“ prompts/                       # æç¤ºè¯æ¨¡æ¿
â”‚   â”œâ”€â”€ ğŸ“„ lead_agent.xml
â”‚   â”œâ”€â”€ ğŸ“„ search_agent.xml
â”‚   â””â”€â”€ ğŸ“„ tools_instruction.xml
â”‚
â”œâ”€â”€ ğŸ“ tests/                         # æµ‹è¯•æ–‡ä»¶
â”œâ”€â”€ ğŸ“ logs/                          # æ—¥å¿—ç›®å½•
â”œâ”€â”€ ğŸ“ examples/                      # ç¤ºä¾‹ä»£ç 
â””â”€â”€ ğŸ“ docs/                          # æ–‡æ¡£
```



### å…³é”®é…ç½® (config.yaml)

```yaml
models:
  lead_agent:
    provider: "anthropic"
    model: "claude-3-opus"
    supports_thinking: true
  search_agent:
    provider: "openai"
    model: "gpt-4-turbo"
```



### å®æ–½å»ºè®®

1. **é¿å…è¿‡åº¦å·¥ç¨‹åŒ–**ï¼šå…ˆè·‘é€šMVPï¼ˆLead Agent + ä¸€ä¸ªå·¥å…·ï¼‰ï¼Œå†é€æ­¥å¢å¼ºï¼Œä¸è¦å®ç°"å¯èƒ½ä¼šç”¨åˆ°"çš„åŠŸèƒ½
2. **å®ç°é¡ºåº**ï¼šæ ¸å¿ƒæµç¨‹è·‘é€šâ†’ XMLè§£æ â†’ é”™è¯¯å¤„ç† â†’ æƒé™/ç›‘æ§ç­‰é«˜çº§ç‰¹æ€§
3. **æŠ€æœ¯å€ºåŠ¡**ï¼šå¯æš‚æ—¶è·³è¿‡æƒé™ç³»ç»Ÿã€å®Œå–„é”™è¯¯å¤„ç†ã€æ€§èƒ½ä¼˜åŒ–ï¼›å¿…é¡»å®ç°XMLè§£æã€Agenté€šä¿¡ã€Artifactæ“ä½œ
4. **ä½¿ç”¨æˆç†Ÿæ–¹æ¡ˆ**ï¼šç›´æ¥ç”¨LangChain/LangGraphç°æˆåŠŸèƒ½ï¼Œä¸é‡é€ è½®å­
5. **ç®€åŒ–çŠ¶æ€ç®¡ç†**ï¼šç”¨LangGraphå†…ç½®stateæœºåˆ¶ï¼Œä¸è‡ªå·±ç®¡ç†å¤æ‚çŠ¶æ€
6. **åˆç†é»˜è®¤å€¼**ï¼šè®©ç³»ç»Ÿå¼€ç®±å³ç”¨ï¼Œé¿å…è¿‡å¤šé…ç½®
7. **è°ƒè¯•å‹å¥½**ï¼šå…³é”®èŠ‚ç‚¹åŠ æ—¥å¿—ï¼ŒåŒ…æ‹¬Agentå†³ç­–ã€å·¥å…·è°ƒç”¨ã€çŠ¶æ€å˜åŒ–ï¼Œé”™è¯¯ä¿¡æ¯è¦æ˜ç¡®
8. **ä»£ç é£æ ¼**ï¼šæ¸…æ™°èƒœè¿‡èªæ˜ï¼Œ**ä»£ç å³æ³¨é‡Š**â€”â€”ç”¨æ¸…æ™°çš„å‘½åå’Œç»“æ„è®©ä»£ç è‡ªè§£é‡Šã€‚å‡½æ•°
9. **ä¸è¦è¿‡æ—©ä¼˜åŒ–**ï¼šå…ˆè®©å®ƒå·¥ä½œï¼Œå†è®©å®ƒæ­£ç¡®ï¼Œæœ€åè®©å®ƒå¿«
10. **ä¿æŒç®€å•ä¾èµ–**ï¼šåªç”¨å¿…è¦çš„åº“ï¼Œé¿å…ä¾èµ–åœ°ç‹±
